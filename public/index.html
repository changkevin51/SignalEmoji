<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="Functions.js"></script>
        <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
        <meta name="description" content="Emoji Lockdown - A multiplayer emoji guessing game">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/x-icon" href="images/SignalSketchLogo.ico">
        <title>Signal Emoji</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="newstyles.css">
    </head>
<body>
    <main>
        <section class="paymentContainer" style="padding: 5px; border-radius: 20px;">
            <!-- Room Join Section -->
            <div class="sectionContainer" id="camera">
                <span class="recent-text">Players:</span>
                <div id="player-list" class="player-list">
                    <!-- Dynamic player list populated by JS -->
                </div>
                <div class="messaging">
                    <h1 style="padding: 10px;">Chat</h1>
                    <div class="messages" id="messageContainer">
                        <div class="messages" id="messageContainer">
                            <!-- Chat messages will be dynamically inserted here -->
                        </div>
                    </div>
                    <div class="chat-container">
                        <div class="container" id="chatbox">
                            <input class="messagebox" id="chat-input" placeholder="Chat with other players..." onkeydown="checkEnterChat(event)">
                            <span class="material-symbols-outlined" id="sendIcon" onclick="submitGuess(document.getElementById('chat-input').value); document.getElementById('chat-input').value = '';">send</span>
                        </div>
                    </div>
                    <div class='toggle-switch' onclick="myFunction()">
                        <label class="label-1" onclick="myFunction()">
                            <input id="dark-slider" class="input-1" type="checkbox"/>
                            <div class="slider" onclick="myFunction()"></div>
                        </label>
                    </div> 
                </div>   
            </div>

            <div class="sectionContainer" id="chat">
                <!-- Room Creation/Join UI -->
                <div id="room-section">
                    <div class="percentage-text" id="percentage-text">Signal Emoji</div>
                    <button id="leave-room-btn" class="join-button" style="display: none;">Leave Room</button>
                    
                    <div class="join-element"> 
                        <input id="joinCode" class="textbox" type="text" placeholder="Enter Your Name" onkeydown="checkEnter(event)"> 
                        <button id="create-room-btn" class="join-button">Create Room</button>
                        <button id="join-room-btn" class="join-button">Join</button>
                    </div>

                    <div id="game-config" style="display: none; margin-top: 10px;">
                        <!-- Game Instructions Panel -->
                        <div class="game-instructions">
                            <div class="instructions-header">
                                <h2>How to Play Signal Emoji</h2>
                                <div class="pulse-icon">ðŸ“±</div>
                            </div>
                            
                            <div class="instructions-section">
                                <h3><span class="instruction-icon">ðŸŽ®</span> Game Basics</h3>
                                <ul class="instruction-list">
                                    <li>Each
                                         round, one player becomes the <strong>Emojier</strong> ðŸŽ®</li>
                                    <li>The Emojier gets a secret word or phrase to represent</li>
                                    <li>Using only emojis, the Emojier must help others guess the word</li>
                                    <li>The faster you guess correctly, the more points you earn!</li>
                                </ul>
                            </div>
                            
                            <div class="instructions-columns">
                                <div class="instructions-section">
                                    <h3><span class="instruction-icon">ðŸ”’</span> Signal Emoji Mode</h3>
                                    <ul class="instruction-list">
                                        <li>Classic tech command guessing game</li>
                                        <li>Emojier selects 3-5 emojis to represent a tech command</li>
                                        <li>Other players type guesses to earn points</li>
                                        <li>First correct guess gets the most points!</li>
                                    </ul>
                                </div>
                                
                                <div class="instructions-section">
                                    <h3><span class="instruction-icon">ðŸ“–</span> Story Mode</h3>
                                    <ul class="instruction-list">
                                        <li>Create a collaborative emoji story</li>
                                        <li>Each round builds on previous guesses</li> 
                                        <li>One player creates a story prompt</li>
                                        <li>Chain together emojis and guesses for a fun narrative!</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="instructions-section">
                                <h3><span class="instruction-icon">ðŸ‘‘</span> Host Controls</h3>
                                <ul class="instruction-list">
                                    <li>Select a game mode from the options below</li>
                                    <li>Set number of rounds (1-20)</li>
                                    <li>Click "Start Game" when all players have joined</li>
                                    <li>Share the room code with friends to let them join!</li>
                                </ul>
                            </div>
                            
                            <button class="instruction-toggle">Got it!</button>
                        </div>
                        
                        <div class="game-mode-selection">
                            <div class="mode-title">Select Game Mode:</div>
                            <div class="mode-options">
                                <div class="mode-option active" data-mode="standard">
                                    <div class="mode-icon">ðŸ”’</div>
                                    <div class="mode-name">Signal Emoji</div>
                                    <div class="mode-description">Classic mode - guess the tech commands from emojis!</div>
                                </div>
                                <div class="mode-option" data-mode="story">
                                    <div class="mode-icon">ðŸ“–</div>
                                    <div class="mode-name">Story of Emojis</div>
                                    <div class="mode-description">Create a story chain with your emoji guesses!</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="join-element">
                            <input id="roundsInput" class="textbox" type="number" min="1" max="20" value="" placeholder="Number of Rounds">
                            <button id="start-game-btn" class="join-button">Start Game</button>
                        </div>
                    </div>
                </div>

                <!-- Game UI -->
                <div id="game-container" class="game-container" style="display: none;">
                    <!-- Game Header with Round Info -->
                    <div class="game-header">
                        <div class="game-title">Round <span id="current-round">1</span>/<span id="total-rounds">5</span></div>
                        <div id="round-status" class="status-info">Waiting for players...</div>
                    </div>
                    
                    <!-- Timer Bar -->
                    <div class="timer-container">
                        <div id="timer-bar" class="timer-bar" style="width: 100%;"></div>
                    </div>
                    
                    <!-- Emoji Display -->
                    <div class="emoji-display" id="emoji-display">
                        <div class="emoji-slot" id="emoji-slot-0"></div>
                        <div class="emoji-slot" id="emoji-slot-1"></div>
                        <div class="emoji-slot" id="emoji-slot-2"></div>
                        <div class="emoji-slot" id="emoji-slot-3"></div>
                        <div class="emoji-slot" id="emoji-slot-4"></div>
                    </div>
                    
                    <!-- Emojier Section -->
                    <div id="emojier-section" class="game-phase">
                        <h3>You are the Emojier</h3>
                        <div id="prompt-container">
                            <p>Your word to represent with emojis is:</p>
                            <h2 id="prompt-word"></h2>
                        </div>
                        
                        <div class="emoji-picker" id="emoji-picker">
                            <!-- Emoji picker populated by JavaScript -->
                        </div>
                        
                        <button id="lock-emojis-btn" class="guess-button" disabled>Lock In Emojis</button>
                    </div>
                    
                    <!-- Guesser Section -->
                    <div id="guesser-section" style="display: none;">
                        <div class="hint-container">
                            <div class="prompt-title">Hint:</div>
                            <div class="hint-letters" id="hint-display"></div>
                        </div>
                        
                        <div class="guess-input-container">
                            <input type="text" id="guess-input" class="guess-input" placeholder="Type your guess here..." onkeydown="checkGuessEnter(event)">
                            <button id="submit-guess-btn" class="guess-button">Guess</button>
                        </div>
                    </div>
                    
                    <!-- Story Mode Section -->
                    <div id="story-mode-section" style="display: none;">
                        <div class="prompt-container">
                            <div class="prompt-title">Story Chain:</div>
                            <div class="story-chain" id="story-chain">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="prompt-container" id="next-prompt-container" style="display: none;">
                            <div class="prompt-title">Create the next prompt:</div>
                            <div class="guess-input-container">
                                <input type="text" id="next-prompt-input" class="guess-input" placeholder="Type next story prompt..." maxlength="30">
                                <button id="submit-story-prompt-btn" class="guess-button">Submit</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Game Results -->
                    <div id="round-results" style="display: none;">
                        <div class="prompt-container">
                            <div class="prompt-title">The answer was:</div>
                            <div class="prompt-word" id="answer-display"></div>
                        </div>
                    </div>
                    
                    <!-- <div class="guess-section">
                        <div class="guess-prompt-title">What's your guess?</div>
                        <div class="main-guess-container">
                            <input type="text" id="main-guess-input" class="main-guess-input" placeholder="Enter your guess here..." onkeydown="checkEnterMainGuess(event)">
                            <button id="main-submit-guess-btn" class="main-guess-button" onclick="submitGuess()">Submit Guess</button>
                        </div>
                        <div id="guess-feedback" class="guess-feedback"></div>
                    </div> -->
                    
                    <!-- Leaderboard -->
                    <div class="leaderboard">
                        <div class="leaderboard-title">Leaderboard</div>
                        <ul class="leaderboard-list" id="leaderboard-list">
                            <!-- Populated by JavaScript -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <div id="snackbar"></div>
    </main>
    <script src="client.js"></script>
</body>
</html>


<!-- 
<div class="table-holder" style="display: block;">
    <div class="emoji-container">
      <div id="emojiDisplay"></div>
      <div style="position: relative;">
        <button id="emojiToggle">ðŸ˜€ Open Emoji Picker</button>
        <emoji-picker id="emojiPicker"></emoji-picker>
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const emojiToggle = document.getElementById('emojiToggle');
      const emojiPicker = document.getElementById('emojiPicker');
      const emojiDisplay = document.getElementById('emojiDisplay');
      let pickerVisible = false;
  
      // Toggle picker visibility
      emojiToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        pickerVisible = !pickerVisible;
        emojiPicker.style.display = pickerVisible ? 'block' : 'none';
      });
  
      // When emoji is selected from picker
      emojiPicker.addEventListener('emoji-click', function(event) {
        emojiDisplay.textContent += event.detail.unicode;
      });
  
      // Handle keyboard events
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && document.activeElement !== emojiDisplay) {
          // Remove last emoji when backspace is pressed
          emojiDisplay.textContent = emojiDisplay.textContent.slice(0, -2);
          e.preventDefault();
        }
      });
  
      // Close picker when clicking outside
      document.addEventListener('click', function(event) {
        if (pickerVisible && 
            !emojiPicker.contains(event.target) && 
            event.target !== emojiToggle) {
          pickerVisible = false;
          emojiPicker.style.display = 'none';
        }
      });
  
      // Prevent picker from closing when clicking inside it
      emojiPicker.addEventListener('click', function(e) {
        e.stopPropagation();
      });
  
      // Prevent focus on the display div
      emojiDisplay.addEventListener('mousedown', function(e) {
        e.preventDefault();
      });
    });
  </script> -->
